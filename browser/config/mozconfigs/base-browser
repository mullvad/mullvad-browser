# Shared build settings and settings to enhance security and privacy.

. $topsrcdir/browser/config/mozconfig

if test -f "$topsrcdir/mozconfig-toolchain"; then
    . $topsrcdir/mozconfig-toolchain
fi

mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj-@CONFIG_GUESS@

ac_add_options --enable-official-branding
export MOZILLA_OFFICIAL=1

ac_add_options --enable-optimize
ac_add_options --enable-rust-simd

# Bug 13379: Sign our MAR files.
ac_add_options --enable-verify-mar
ac_add_options --enable-nss-mar
ac_add_options --enable-base-browser-update

ac_add_options --enable-bundled-fonts

# See bug #41587
ac_add_options --disable-updater

ac_add_options --disable-tests
ac_add_options --disable-debug

ac_add_options --disable-crashreporter
# Before removing, please notice that WebRTC does not work on mingw (Bug 1393901)
ac_add_options --disable-webrtc
ac_add_options --disable-parental-controls
# Let's make sure no preference is enabling either Adobe's or Google's CDM.
ac_add_options --disable-eme
ac_add_options --enable-proxy-bypass-protection
# See bugs #30575 and #32418: system policies are harmful either because they
# could allow proxy bypass, and override a number of other preferences we set
ac_add_options --disable-system-policies

# See bug #41131
ac_add_options --disable-backgroundtasks

# Disable telemetry
ac_add_options MOZ_TELEMETRY_REPORTING=

if test -z "$WASI_SYSROOT"; then
    ac_add_options --without-wasm-sandboxed-libraries
fi

ac_add_options --with-relative-data-dir=BaseBrowser/Data/Browser
